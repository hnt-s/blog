---
title: "APIについて"
date: "2024-10-21"
tags: ["api", "参考書"]
description: "Web API: The Good Parts 水野貴明(著)"
id: "8"
---
## はじめに
今回は、[水野貴明 著 「Web API: The Good Parts」（オライリー・ジャパン発行）]((https://www.amazon.co.jp/Web-API-Parts-%E6%B0%B4%E9%87%8E-%E8%B2%B4%E6%98%8E/dp/4873116864/ref=sr_1_1?adgrpid=121602143400&dib=eyJ2IjoiMSJ9.qomneTPaBkx3YarwtCXe8dxkofcKkBz2m_YjGnY6Kk3ZqTCNhBUxAexeVXAmPVLr6sg4iT_e1tXlKz1Bx1_tB5NY1kGSJlF5YiPZyh89Mj6i41HxVMOTUv8A-L43tlt5bgnRLvgXtnzvWOrx58KhBDsJdBvnXr82MD-Zx5OC_WN3WEKe4j2JTayQLS8oxTuTa8Iiv8PmcMT_JRC_kjHSMZCsXKlBM7SSdCMi02m8TpQ0JPeh3j6lQk7fcBJwjw1EWBAMIhWx42GJeogPFyfpN8lGJavx6CWYIqLYMUZk6hw.dvJ76576aUDsQ1Yd32laCm_0SNLUUw74ZjwP0X3hp0k&dib_tag=se&hvadid=699038462109&hvdev=c&hvqmt=e&hvtargid=kwd-525626072592&hydadcr=27296_14768183&jp-ad-ap=0&keywords=web+api+the+good+parts&qid=1729491483&sr=8-1))について得た知識を紹介しようと思います。

## RESTについて
現在、RESTという言葉は「REST API」という言葉で使われています。この言葉の意味には現在2種類の意味が使われています。
1. FieldingのRESTアーキテクチャスタイルの原則に合わせたウェブサービスシステム
2. RPC(Remote Procedure Call)スタイルに合わせた簡易なXML(やJSON)とHTTPインターフェースを採用したシステム
RESTとは、簡単に言うとシンプルなWebシステムの設計思想のことです。これを守ることで、情報をやり取りする際に問題なく連携できるというような意味合いです。

## APIエンドポイント
WebAPIによるエンドポイントとは、APIにアクセスするためのURIのことを指します。

#### エンドポイント作成の注意点
WebAPIにおけるエンドポイントはURIであり、クライアントから見てどんな機能を持つかひと目でわかるようにする必要があります。以下にそのポイントを挙げます。
1. 短く簡潔
2. よく使われる英単語を使う
3. 大文字小文字が混在していない（小文字で統一）
4. 改造しやすい
5. サーバ側のアーキテクチャが反映されていない
6. ルールが統一されている
以下にそれぞれ説明したいと思います。

#### 1. 短く簡潔
エンドポイントを作成する際は、冗長にならないようにする必要があります。
<br/>

#### 2. よく使われる英単語を使う
クライアントから見て、例えばスペイン語などがURIに含まれていたらひと目で判断できなくなる可能性があります。また、英語圏では略される言葉であっても基本的には略さずに設計したほうが良いです。ただし、japanがjpのように、略語が標準化されているものに関しては積極的に略語を使ったほうが良いです。
<br/>

#### 3. 大文字小文字が混在していない（小文字で統一）
URIの中にアルファベットの大文字や小文字が混在していると、APIがわかりずらくなり、間違えやすくなります。その場合標準的に選択されているのは小文字です。
例えばgetUserNameのような場合は、get_user_nameとすることもできますが、そもそもこういった名前の付け方は良くないみたいです。
<br/>

#### 4. 改造しやすい
改造しやすい(Hackable)URIは、エンドポイントを見て他のエンドポイントを想像できるように設計するということです。例えば、
```html
http://api.example.com/v1/items/123456
```
のようなURIは直感的にIDが123456であるということが予想できます。クライアントからみて、APIを使うのに毎回ドキュメントを見なければならないのはストレスがかかります。
<br/>

#### 5. サーバ側のアーキテクチャが反映されていない
クライアント側から見て、サーバ側でのアーキテクチャは全く必要のない情報です。例えば、
```html
http://api.example.com/cgi-bin/get_user.php?user=100
```
のようなURIではサーバがphpで書かれていることがすぐに判明してしまいます。これらは、サーバの脆弱性を突いてくる人たちにとっても有益な情報を与えることになってしまうため、良くないといえます。
<br/>

#### ルールが統一されている
WebAPIを提供する場合、ほとんどの場合で複数のAPIを公開します。例えば、
```html
// 友達の情報の取得
http://api.example.com/friends?id=100

// メッセージの投稿
http://api.example.com/friend/100/message
```
これら２つのAPIが同一のサービスであった場合、クライアントが実装する際に混乱を招いてしまいます。ゆえに、エンドポイントを作成する際はルールを統一しておいたほうがわかりやすいということです。


