---
title: "ページレンダリング"
date: "2024-10-18"
tags: ["nextjs", "App Router", "Pages Router"]
description: "AppルーターとPagesルーターのレンダリングの違いについて説明します。"
id: "3"
---
## はじめに
　Next.jsには、クライアント側だけでなく、サーバー側の機能も持っています。そして、サーバー側であらかじめコンポーネントをレンダリングし、HTMLのページとして送信することがあるのです。今回は、クライアント側でレンダリングされる場合と、サーバー側でレンダリングされる場合について説明していきます。

## AppルーターとPagesルーターの違い
　AppルーターとPagesルーターのそれぞれのレンダリングシステムの違いについて簡単に説明します。
　まず、Appルーターはコンポーネント単位でレンダリングを実行するタイミングを決定できます。クライアント側で動的に更新されないものは「サーバーコンポーネント」、クライアント側で動的に更新されるものは「クライアントコンポーネント」といいます。これらは完全に分離しているわけではなく、ページの中で使い分けることができるのです。
　次に、Pagesルーターは、そのページがどこでどのタイミングでレンダリングされるかが決まります。クライアントで動的に更新されるものは「クライアントサイドレンダリング」といいます。また、静的なコンテンツとして、ビルド時にレンダリングされる「スタティックレンダリング」、動的なコンテンツはクライアントからアクセスがあった際にサーバー側でその都度レンダリングされる「ダイナミックレンダリング」があります。
　このように、それぞれによってレンダリングシステムが異なるため、よく理解しておく必要があります。

## レンダリングされる場所の違い
　続いて、サーバーサイドレンダリング(SSR)とクライアントサイドレンダリング(CSR)の違いについて説明します。とはいっても、サーバー側かクライアント側かを決定するのは、「クライアント側で動的に変化するかどうか」であるため、以下にはそれぞれの特徴について書いていきたいと思います。
　まず、サーバーサイドレンダリングは、コンポーネントでリアルタイムに更新するような操作がない場合、そのコンポーネントはサーバー側でレンダリングされます。あらかじめサーバー側でHTMLコードが生成されてから送られるため、クライアント側に負担がありません。表示もクライアントサイドレンダリングに比べて高速です。また、完成したHTMLコードがサーバーから返されるため、SEO対策に強いという特徴があります。
　さらに、サーバーサイドレンダリングの中に、静的サイト生成(SSG)というものがあります。これは、アプリケーションをビルドする際にコンポーネントを完全にHTMLコードに変換するという方式です。これにより、事前に生成されたHTMLファイルが提供されるため、読み込み速度が速いです。こちらも、同様の理由でSEO対策に適しています。
　次に、クライアントサイドレンダリングは、サーバー側では特に操作されず、クライアント側に送られてきた段階でレンダリングを実行します。このレンダリング手法が利用される例として、コンポーネントの更新機能を使うものが挙げられます。イベント処理などで表示が更新される場合はクライアントサイドでレンダリングされます。また、初期表示時に最低限のHTMLを返すため、初期ロードが軽いという特徴があります。
　Next.jsでは、サーバー側でレンダリング可能なものは自動的にサーバーサイドでレンダリングされます。クライアントサイドでレンダリングされるのは、サーバー側で実行できないものがある場合のみです。クライアント側でレンダリングしてほしい場合は、コンポーネントのソースコードの冒頭に「'use client'」と明記しましょう。