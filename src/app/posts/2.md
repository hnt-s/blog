---
title: "AppルーターとPagesルーターの違いについて"
date: "2024-10-18"
tags: ["nextjs"]
description: "nextjsにおける二つのルーティング方式についてまとめました。"
id: "2"
---
## はじめに
　Next.jsには２つのルーターシステムが備わっています。「src」ディレクトリ内に「app」ディレクトリがある「Appルーター」と、「pages」ディレクトリにファイルをまとめる「Pagesルーター」です。今回は、この２つの違いについて説明します。

## APPルーターについて
　これは、比較的最近に用意されたルーティング方式です。特徴として、appディレクトリ内のフォルダ構造をルートにマッピングできます。appディレクトリ下には、レイアウトファイルlayout.tsxとコンテンツファイルpage.tsxがあり、アプリケーション全体のレイアウトが調節できます。各フォルダ内のページに共通するレイアウトを定義できるため、ナビゲーションバーやフッターなどを再利用しやすくなります。

## Pagesルーターについて
　これは、従来のルーティングシステムでNext.js初期のバージョンから存在しています。「page」というディレクトリにWebページで使われるファイル類がまとめられています。こちらも同様にルーティングが可能ですが、Appルーターと違うところは、pagesディレクトリ内のファイルとフォルダ構造がそのままルーティングに使用されるというところです。例えば、pages/about.tsxを作成すると、/aboutというルートが生成されます。
　pagesルーターは、Appルーターのようにアプリケーション全体で共通するようなレイアウトなどは用意されていないため、ページごとで完結するようなアプリの作成を考えたものといえます。

## それぞれの特徴について
　以下にそれぞれの特徴についてまとめたものを表にしてみました。

| **特徴**                  | **App Router**                     | **Pages Router**                  |
|---------------------------|------------------------------------|-----------------------------------|
| ディレクトリ               | `app` ディレクトリ                 | `pages` ディレクトリ              |
| レンダリング方式           | React Server Componentsの使用      | 従来のReactコンポーネントのみ    |
| データフェッチ方法         | Suspenseベース、`use` フックなど   | `getStaticProps`, `getServerSideProps`, `getInitialProps` |
| レイアウトの定義           | `layout.tsx`でレイアウトの再利用   | ページごとに定義                 |
| エラーハンドリング         | `error.tsx` ファイル               | ページごとにtry-catchなど手動で   |
| 読み込み中UI               | `loading.tsx` ファイル             | 手動で実装                       |
| APIルート                  | 別途サーバーレスエンドポイント     | `pages/api`ディレクトリ内         |
| 実装の柔軟性               | より複雑で柔軟な構造が可能         | シンプルで従来のWeb開発に近い    |
